---
title: 单例设计模式
date: 2019-12-20
categories: 设计模式
tag:
    - 饿汉式
    - 懒汉式
---
# 单例设计模式：
在一个程序中某个类的实例只会有一个，这样的设计模式叫单例设计模式。

**例：** 一个游戏中所有的玩家公用一个游戏场景，那么可以将游戏场景设计为单列。
<!-- more -->
## 如何设计一个单例模式
要满足一个单例设计模式需要：
1. 将构造器私有化（不让外部来生成实例）
2. 提供一个静态的该类对象（唯一的实例对象）。
3. 向外提供一个静态的获取实例的方法getInstance（）
## 代码
- 饿汉式
饿汉式是一个未雨绸缪的方式，它提前准备好一个实例等着你来用。
```java
public class SingleTon_hungry {
	private static SingleTon_hungry A = new SingleTon_hungry();

	private SingleTon_hungry() {
	}

	public static SingleTon_hungry getInstance() {
		return A;
	}

	public static void main(String[] args) {
		// TODO Auto-generated method stub
		SingleTon_hungry instance1 = SingleTon_hungry.getInstance();
		SingleTon_hungry instance2 = SingleTon_hungry.getInstance();
		System.out.println(instance1==instance2);

	}

}
```
- 懒汉式
懒汉式是第一次用到才会生成一个实例，后面直接返回该实例
```java
public class SingleTon_lazy {

	private static SingleTon_lazy instance = null;

	private SingleTon_lazy() {
	}

	public static synchronized SingleTon_lazy getInstance() {
		if (instance == null) {
			instance = new SingleTon_lazy();
		}

		return instance;

	}

	public static void main(String[] args) {
		SingleTon_lazy instance1 = SingleTon_lazy.getInstance();
		SingleTon_lazy instance2 = SingleTon_lazy.getInstance();
		System.out.println(instance1 == instance2);
	}

}
```
## 分析
在上面的两段代码中可以发现在懒汉式中的getInstance方法中添加了关键字synchronized,因为在多线程中懒汉模式是线程不安全的，如果有连个线程同时通过了if(instance==null)那么就会有两个不同的实例。
## 总结
饿汉式线程安全，但是有点浪费资源，懒汉式可能会造成线程不安全，可以减少浪费。